<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Statement.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pcond</a> &gt; <a href="index.source.html" class="el_package">com.github.dakusui.pcond.fluent</a> &gt; <span class="el_source">Statement.java</span></div><h1>Statement.java</h1><pre class="source lang-java linenums">package com.github.dakusui.pcond.fluent;

import com.github.dakusui.pcond.core.fluent.builtins.*;

import java.util.*;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.function.Predicate;
import java.util.stream.Stream;

import static com.github.dakusui.pcond.forms.Functions.elementAt;
import static com.github.dakusui.pcond.forms.Predicates.allOf;
import static com.github.dakusui.pcond.forms.Predicates.transform;
import static com.github.dakusui.pcond.internals.InternalUtils.makeSquashable;

@FunctionalInterface
public interface Statement&lt;T&gt; {
  default T statementValue() {
<span class="nc" id="L18">    throw new NoSuchElementException();</span>
  }

  Predicate&lt;T&gt; statementPredicate();

  /**
   * Returns a transformer for a `String` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see StringTransformer
   */
  static StringTransformer&lt;String&gt;
  stringValue(String value) {
<span class="fc" id="L32">    return StringTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `double` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see DoubleTransformer
   */
  static DoubleTransformer&lt;Double&gt;
  doubleValue(Double value) {
<span class="fc" id="L44">    return DoubleTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `float` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see FloatTransformer
   */
  static FloatTransformer&lt;Float&gt;
  floatValue(Float value) {
<span class="fc" id="L56">    return FloatTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `long` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see LongTransformer
   */
  static LongTransformer&lt;Long&gt;
  longValue(Long value) {
<span class="fc" id="L68">    return LongTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `int` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see IntegerTransformer
   */
  static IntegerTransformer&lt;Integer&gt;
  integerValue(Integer value) {
<span class="fc" id="L80">    return IntegerTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `short` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see ShortTransformer
   */
  static ShortTransformer&lt;Short&gt;
  shortValue(Short value) {
<span class="fc" id="L92">    return ShortTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `boolean` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see BooleanTransformer
   */
  static BooleanTransformer&lt;Boolean&gt;
  booleanValue(Boolean value) {
<span class="fc" id="L104">    return BooleanTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a general `Object` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see ObjectTransformer
   */
  static &lt;E&gt;
  ObjectTransformer&lt;E, E&gt;
  objectValue(E value) {
<span class="fc" id="L117">    return ObjectTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `List` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see ListTransformer
   */

  static &lt;E&gt;
  ListTransformer&lt;List&lt;E&gt;, E&gt;
  listValue(List&lt;E&gt; value) {
<span class="fc" id="L131">    return ListTransformer.create(() -&gt; value);</span>
  }

  /**
   * Returns a transformer for a `Stream` value.
   *
   * @param value A value for which a transformer is created.
   * @return A transformer for a {@code value}.
   * @see StreamTransformer
   */
  static &lt;E&gt;
  StreamTransformer&lt;Stream&lt;E&gt;, E&gt;
  streamValue(Stream&lt;E&gt; value) {
<span class="fc" id="L144">    return StreamTransformer.create(() -&gt; value);</span>
  }

  static Predicate&lt;? super List&lt;?&gt;&gt; createPredicateForAllOf(Statement&lt;?&gt;[] statements) {
<span class="fc" id="L148">    AtomicInteger i = new AtomicInteger(0);</span>
<span class="fc" id="L149">    @SuppressWarnings(&quot;unchecked&quot;) Predicate&lt;? super List&lt;?&gt;&gt;[] predicates = Arrays.stream(statements)</span>
<span class="fc" id="L150">        .map(e -&gt; makeSquashable(transform(elementAt(i.getAndIncrement())).check(&quot;WHEN&quot;, (Predicate&lt;? super Object&gt;) e.statementPredicate())))</span>
<span class="fc" id="L151">        .toArray(Predicate[]::new);</span>
<span class="fc" id="L152">    return makeSquashable(allOf(predicates));</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>